{"openapi":"3.0.1","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost","description":"Generated server url"}],"paths":{"/moveSongsToOtherLibrary":{"put":{"tags":["library-controller"],"summary":"Move songs to other library.","operationId":"moveSongsToOtherLibrary","parameters":[{"name":"platform","in":"query","description":"Which platform the library belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"},"description":"A map that contains parameters, fromTid and toTid are used to evict cache."}}},"required":true},"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/library":{"put":{"tags":["library-controller"],"summary":"Update library.","operationId":"updateLibrary","parameters":[{"name":"platform","in":"query","description":"Which platform the library belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateLibraryDTO"}}}},"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}},"post":{"tags":["library-controller"],"summary":"Create new library.","operationId":"createLibrary","parameters":[{"name":"platform","in":"query","description":"Which platform the library belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"string"},"description":"library A map that contains the name of library."}}},"required":true},"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/credential":{"put":{"tags":["user-controller"],"summary":"Update the credential of third app.","operationId":"updateThirdAppCredential","parameters":[{"name":"platform","in":"query","description":"1 for qqmusic, 2 for ncm, 3 for bilibili.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ThirdAppCredentialDTO"}}},"required":true},"responses":{"default":{"description":"The result for updating credential.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/verify/resetPassword":{"post":{"tags":["login-controller"],"summary":"Verify token for resetting user's password, need to log in first.","operationId":"verifyResetPassToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPassDTO"}}},"required":true},"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/verify/nologin/signUp":{"post":{"tags":["login-controller"],"summary":"Verify token for sign up new account, no need to log in.","operationId":"verifySignUpTokenWithoutLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SignUpNologinDTO"}}},"required":true},"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/verify/nologin/resetPassword":{"post":{"tags":["login-controller"],"summary":"Verify token for resetting user's password, no need to log in.","operationId":"verifyResetPassTokenWithoutLogin","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ResetPassNologinDTO"}}},"required":true},"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/verify/bindEmail":{"post":{"tags":["login-controller"],"summary":"Verify token for binding user's email, need to log in first.","operationId":"verifyBingEmailToken","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/BindEmailDTO"}}},"required":true},"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/register":{"post":{"tags":["login-controller"],"summary":"Register account in pms.","operationId":"register","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterFormDTO"}}},"required":true},"responses":{"default":{"description":"Registered user's id in pms if success.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/login":{"post":{"tags":["login-controller"],"summary":"PMS user login endpoint.","operationId":"login","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginFormDTO"}}},"required":true},"responses":{"default":{"description":"Result whose data is LoginResult.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/addSongsToLibrary":{"post":{"tags":["library-controller"],"summary":"Add songs to library.","operationId":"addSongsToLibrary","parameters":[{"name":"platform","in":"query","description":"Which platform the library belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"type":"object","additionalProperties":{"type":"object"},"description":"A map that contains songs id and target library's id."}}},"required":true},"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/users":{"get":{"tags":["test-controller"],"summary":"Get logged users.","operationId":"getLoggedUsers","responses":{"default":{"description":"Logged users.","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/user/{id}":{"get":{"tags":["user-controller"],"summary":"Get user information for specific platform.","operationId":"getUser","parameters":[{"name":"id","in":"path","description":"Your pms user id, Used for cache evicting.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"Which platform the user belongs to. 0 represents pms, 1 represents qq music, 2 represents netease cloud music, 3 represents bilibili.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"User information for specific platform.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/user/basic":{"get":{"tags":["user-controller"],"summary":"Get basic pms user info of the current user login.","operationId":"getBasicPMSUserInfo","responses":{"default":{"description":"Basic pms user info.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/songsLink/{SongIds}":{"get":{"tags":["song-controller"],"summary":"Get songs link.","operationId":"getSongsLink","parameters":[{"name":"SongIds","in":"path","description":"The song's id, multiple songs separated with comma.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"Songs' links.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/song/{songId}":{"get":{"tags":["song-controller"],"summary":"Get detail song.","operationId":"getDetailSong","parameters":[{"name":"songId","in":"path","description":"The song id.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The detail song, wrapped with Result DTO, the data is subclass of BasicSong.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/similarSongs/{songId}":{"get":{"tags":["song-controller"],"summary":"Get similar songs.","operationId":"getSimilarSongs","parameters":[{"name":"songId","in":"path","description":"The song id.","required":true,"schema":{"type":"string"}},{"name":"songType","in":"query","description":"The pms song type, only used in pms platform.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The similar songs.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/sendcode":{"get":{"tags":["login-controller"],"summary":"Send token to yur email for verifying, no need to login first.","operationId":"sendVerifyTokenWithoutLogin","parameters":[{"name":"email","in":"query","description":"Email to receive token.","required":true,"schema":{"type":"string"}},{"name":"type","in":"query","description":"Token type, 1 for sign up, 2 for reset password.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/search/song/{keyword}":{"get":{"tags":["song-controller"],"summary":"Search song by keyword.","operationId":"searchSong","parameters":[{"name":"keyword","in":"path","description":"The song name to search.","required":true,"schema":{"type":"string"}},{"name":"pageNo","in":"query","description":"The page number.","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"pageSize","in":"query","description":"The page size.","required":true,"schema":{"type":"integer","format":"int32"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The search result with page.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/relatedMV/{songId}":{"get":{"tags":["mv-controller"],"summary":"Get all related videos with the song.","operationId":"getRelatedVideos","parameters":[{"name":"songId","in":"path","description":"The song's id.","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"mvId","in":"query","description":"The mv's id, only in ncm platform.","required":false,"schema":{"type":"string"}},{"name":"limit","in":"query","description":"The limit of related videos, only in ncm platform.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"songType","in":"query","description":"The pms song's type, only used in pms platform.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"All the related video about the song.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/mvLink/{vids}":{"get":{"tags":["mv-controller"],"summary":"Get all MVs links.","operationId":"getMVsLink","parameters":[{"name":"vids","in":"path","description":"The vid of the mv(s), multi vid separated by comma.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"A map which key is the vid and value is a list of urls of this mv.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/mv/{vid}":{"get":{"tags":["mv-controller"],"summary":"Get detail video information","operationId":"getDetailMV","parameters":[{"name":"vid","in":"path","description":"The vid/mvid/mlogId of the mv.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"The platform id.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The detail information of the mv.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/mpd/{fileName}":{"get":{"tags":["mpd-controller"],"summary":"Get mpd file.","operationId":"getMpdFile","parameters":[{"name":"fileName","in":"path","description":"The mpd file name.","required":true,"schema":{"type":"string"}}],"responses":{"default":{"description":"The mpd file.","content":{"*/*":{"schema":{"type":"array","items":{"type":"string","format":"byte"}}}}}}}},"/logout/success":{"get":{"tags":["login-controller"],"summary":"Page for logout successfully.","operationId":"logout","responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/login/oauth2/google":{"get":{"tags":["login-controller"],"summary":"Login by Google.","operationId":"loginByGoogle","parameters":[{"name":"code","in":"query","description":"Authorization code.","required":true,"schema":{"type":"string"}}],"responses":{"default":{"description":"Result whose data is LoginResult.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/login/oauth2/github":{"get":{"tags":["login-controller"],"summary":"Login by GitHub.","operationId":"loginByGitHub","parameters":[{"name":"code","in":"query","description":"Authorization code.","required":true,"schema":{"type":"string"}}],"responses":{"default":{"description":"Result whose data is LoginResult.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/library/{library}":{"get":{"tags":["library-controller"],"summary":"Get detail library.","operationId":"getDetailLibrary","parameters":[{"name":"library","in":"path","description":"The library id.","required":true,"schema":{"type":"string"}},{"name":"pn","in":"query","description":"The page number of library, required in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"ps","in":"query","description":"The page size of library, required in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"keyword","in":"query","description":"The searching keyword of resources in fav list, only used in bilibili.","required":false,"schema":{"type":"string"}},{"name":"order","in":"query","description":"The sorting order of resources of this fav list, mtime: by collected time, view: by view time, pubtime: by published time, only used in bilibili.","required":false,"schema":{"type":"string"}},{"name":"range","in":"query","description":"The range of searching, 0: current fav list, 1: all fav lists, only used in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"type","in":"query","description":"0 for created fav list, 1 for collected fav list, required in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"platform","in":"query","description":"Which platform the user belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"Detail library.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/libraries":{"get":{"tags":["library-controller"],"summary":"Get all libraries.","operationId":"getLibraries","parameters":[{"name":"id","in":"query","description":"Your user id in pms, used for cache evicting.","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"pn","in":"query","description":"The page number, only used in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"ps","in":"query","description":"The page size, only used in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"biliPlatform","in":"query","description":"The platform of bilibili, default is web, only used in bilibili.","required":false,"schema":{"type":"string"}},{"name":"type","in":"query","description":"The fav lists type of bilibili, 0 means get created fav lists, 1 means get collected fav lists, only used in bilibili.","required":false,"schema":{"type":"integer","format":"int32"}},{"name":"platform","in":"query","description":"Which platform the user belongs to. 0 represents pms, 1 represents qq music, 2 represents netease cloud music, 3 represents bilibili.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"All libraries for specific platform.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/hello":{"get":{"tags":["test-controller"],"summary":"Test endpoint.","operationId":"test","responses":{"default":{"description":"Current user's authentication.","content":{"*/*":{"schema":{"type":"object","additionalProperties":{"type":"object"}}}}}}}},"/forgot/password":{"get":{"tags":["login-controller"],"summary":"Forget user's password, send verifying code to user's email, need login first.","operationId":"forgotPassword","responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/error":{"get":{"tags":["error-controller"],"summary":"Error endpoint","operationId":"error","responses":{"default":{"description":"Error message.","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/cors/bili/suggestions/{keyword}":{"get":{"tags":["cors-controller"],"summary":"Get search suggestions in bilibili.","operationId":"getSearchSuggestions","parameters":[{"name":"keyword","in":"path","description":"The keyword to search.","required":true,"schema":{"type":"string"}}],"responses":{"default":{"description":"The search suggestions.","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/cors/bili/splash":{"get":{"tags":["cors-controller"],"summary":"Get bilibili splash screen image, modify cors header.","operationId":"getSplashScreen","responses":{"default":{"description":"The splash screen image.","content":{"*/*":{"schema":{"type":"string"}}}}}}},"/cookies":{"get":{"tags":["test-controller"],"summary":"Get cookies of current user.","operationId":"getCookies","responses":{"default":{"description":"Cookies of current user.","content":{"*/*":{"schema":{"type":"array","items":{"type":"object","properties":{"name":{"type":"string"},"value":{"type":"string"},"version":{"type":"integer","format":"int32"},"comment":{"type":"string"},"domain":{"type":"string"},"maxAge":{"type":"integer","format":"int32"},"path":{"type":"string"},"secure":{"type":"boolean"},"httpOnly":{"type":"boolean"}}}}}}}}}},"/check":{"get":{"tags":["test-controller"],"summary":"Check if the user is logged in.","operationId":"checkLoginState","responses":{"default":{"description":"Common result if user has logged, 401 otherwise.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/bind/email":{"get":{"tags":["login-controller"],"summary":"Bind email, send verifying code to user's email, need login first.","operationId":"bindEmail","parameters":[{"name":"email","in":"query","description":"Email you want to bind.","required":true,"schema":{"type":"string"}}],"responses":{"default":{"description":"Common result.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/removeSongsFromLibrary":{"delete":{"tags":["library-controller"],"summary":"Remove songs from library.","operationId":"removeSongsFromLibrary","parameters":[{"name":"libraryId","in":"query","description":"The id of library.","required":true,"schema":{"type":"string"}},{"name":"songsId","in":"query","description":"The id of songs, multiple songs id separated with comma.","required":true,"schema":{"type":"string"}},{"name":"tid","in":"query","description":"The tid of library, used to evict cache.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"The response of request wrapped by Result DTO.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}},"/library/{libraryId}":{"delete":{"tags":["library-controller"],"summary":"Delete the library.","operationId":"deleteLibrary","parameters":[{"name":"libraryId","in":"path","description":"The id of library, multiple libraries separated with comma.","required":true,"schema":{"type":"string"}},{"name":"platform","in":"query","description":"Which platform the library belongs to.","required":true,"schema":{"type":"integer","format":"int32"}}],"responses":{"default":{"description":"The response of request wrapped by Result DTO.","content":{"*/*":{"schema":{"$ref":"#/components/schemas/Result"}}}}}}}},"components":{"schemas":{"Result":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object"},"total":{"type":"integer","format":"int64"}}},"UpdateLibraryDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"intro":{"type":"string"},"cover":{"type":"string","format":"binary"}},"description":"A map contains fields to update."},"ThirdAppCredentialDTO":{"required":["thirdCookie","thirdId"],"type":"object","properties":{"thirdId":{"type":"string"},"thirdCookie":{"type":"string"}},"description":"Credential dto."},"ResetPassDTO":{"required":["password","repeatedPassword","token"],"type":"object","properties":{"password":{"type":"string"},"repeatedPassword":{"type":"string"},"token":{"pattern":"^[a-zA-Z0-9]+$","type":"string"}},"description":"DTO for resetting password."},"SignUpNologinDTO":{"required":["email","name","token"],"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"password":{"type":"string"},"token":{"pattern":"^[a-zA-Z0-9]+$","type":"string"}},"description":"DTO for sign up."},"ResetPassNologinDTO":{"required":["email","password","repeatedPassword","token"],"type":"object","properties":{"password":{"type":"string"},"repeatedPassword":{"type":"string"},"email":{"type":"string"},"token":{"pattern":"^[a-zA-Z0-9]+$","type":"string"}},"description":"DTO for resetting password."},"BindEmailDTO":{"required":["email","token"],"type":"object","properties":{"email":{"type":"string"},"token":{"pattern":"^[a-zA-Z0-9]+$","type":"string"}},"description":"DTO for bind email."},"RegisterFormDTO":{"required":["email","name"],"type":"object","properties":{"name":{"type":"string"},"email":{"type":"string"},"phoneNumber":{"type":"string"},"password":{"type":"string"}},"description":"Register form data."},"LoginFormDTO":{"required":["email","password"],"type":"object","properties":{"email":{"type":"string"},"password":{"type":"string"}},"description":"Login form dto."}}}}